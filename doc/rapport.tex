%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Der Teufel steckt im Detail -- F.N.                     %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%															%%                         %%				
%%			école —————————————			%%                         %%
%%			normale ———————————			%%                         %%
%%			supérieure ————————			%%                         %%
%%			paris—saclay ——————			%%                         %%
%%															%%                         %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[11pt,a4paper]{article}
\usepackage[utf8]{inputenc} 				%% Single Byte Per Letter. Use Unicode if you are not using listings
\usepackage[french]{babel}
\usepackage[T1]{fontenc}

\input{preambule.tex}


\title{Groupes de discussion par inondation fiable}
\author{Adam \bsc{Phillips}, Vincent \bsc{Bonczak}}

\begin{document}
  \maketitle
	
	\begin{abstract}
	Ce document présente notre implémentation du projet de Réseaux de l'année 2020-2021 à l'École Normale Supérieure Paris-Saclay. Dans une première partie
	nous revenons sur l'état général du projet et ce qui a pu être effectivement réalisé, par rapport à notre ambition de départ. La seconde partie traite 
	des détails d'implémentation et des difficultés rencontrées lors de la phase de programmation du protocole. On trouvera enfin en conclusion de ce rapport
	des remarques à propos des tests effectuées, nos réserves quant au comportement actuel du programme, ainsi que quelques perspectives envisageables.
	\end{abstract}
	
	
\section{Introduction}

L'implémentation d'un système de discussion publique et distribué comporte plusieurs parties dont la plus importante reste la mise en œuvre d'un algorithme \emph{distribué}.

\subsection{État du projet}

Le 

En plus des attentes du sujet minimal, sans attention particulière à fonctionner en IPv4 (en fait le pair exige une adresse IPv6). Cependant si un pair géré par
une autre implémentation que la nôtre communique avec nous en IPv4, nous sommes en mesure de le recevoir -- à supposer qu'il puisse envoyer dans un multicast 
idoine du port 1212 pour les Hello courts -- et de communiquer son adresse aux voisins\footnote{Sous forme \emph{IPv4-Mapped}.} 

En outre, nous avons développé les extensions suivantes (en plus de la sécurité de l'implémentation) :
\begin{description}
\item[Agrégation] Les TLV sont placés dans une liste d'attente (\f{toSend}) indexée par les adresses de destination. Pour chaque destinataire, la fonctio \f{sendPendingTLVs}
envoie le plus de TLV possible dans un paquet UDP. Si il n'y a pas assez de TLV, elle remplit au minimum le paquet avec un PadN de 255 octets.
\item[Découverte multicast]Les Hello courts sont envoyés en multicast sur le port 1212.
\end{description}

\section{Implémentation}

\subsection{Garanties}

Dès le départ, nous nous sommes appliqués à respecter et à vérifier scrupuleusement les règles du protocole. En particulier toutes les tailles sont vérifiées, et le remplissage
d'un paquet PadN est observé entièrement pour s'assurer qu'aucune information ne figure dans le champ \f{MBZ}. Ceci permet d'éviter la plupart des attaques visant à provoquer 
une erreur de segmentation. Même lorsqu'il ne s'agit pas d'une attaque, mais juste d'une erreur de calcul de la part d'un autre pair, notre solution reste robuste grâce à
ces considérations.

Lorsqu'une erreur est détectée, un TLV GoAway de code 3 est envoyé à l'emmeteur en cause. D'autre part, les TLV Data non valides ne sont pas inondés (comme aucun TLV invalide 
n'est pris en compte).
	
	Les TLV en attente (Data et neighbour) sont soit envoyés toutes les 5 secondes.
	
	On supprime le voisin de la TVA lors de la réception d'un GoAway de sa part.
	
	Toutes les 20 sec, nettoyage de la table des données récemment reçues.
	
	Sur réception d'un Hello court, envoi d'un hello long à cette personne si il n'est pas dans notre table d'actifs.
	
	Dans l'attente de voisins symétriques, on garde les données à envoyer dans le tampon pendingForFlood
	
\end{document}